<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Employee Management System - XML</title>

<style>
*{margin:0;padding:0;box-sizing:border-box}
body{font-family:"Segoe UI",Arial,sans-serif;background:#eef2f5;padding:20px}
.container{max-width:1100px;margin:auto;background:#fff;padding:30px;border-radius:8px;box-shadow:0 4px 15px rgba(0,0,0,0.1)}
h1{text-align:center;color:#2c3e50;margin-bottom:25px}
.form-container{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:20px;margin-bottom:25px}
label{display:block;margin-bottom:6px;font-weight:600;color:#34495e}
input{width:100%;padding:9px;border:1px solid #ccc;border-radius:5px;font-size:15px}
.buttons{text-align:center;grid-column:1/-1}
button{padding:10px 20px;margin:6px;border:none;border-radius:5px;font-size:15px;cursor:pointer;color:rgb(31, 13, 13)}
.add-btn{background:#2ecc71}
.update-btn{background:#3498db;display:none}
.clear-btn{background:#7f8c8d}
.delete-btn{background:#e74c3c}
table{width:100%;border-collapse:collapse;margin-top:20px}
th{background:#34495e;color:rgb(28, 8, 8);padding:12px;text-align:left}
td{padding:10px;border-bottom:1px solid #ddd}
tr:hover{background:#3489dd}
.center{text-align:center}
.message{padding:12px;margin-bottom:20px;border-radius:5px;font-weight:600;min-height:20px}
.success{background:#5323e2;color:#155724}
.error{background:#5a0d13;color:#721c24}
.info{background:#04343c;color:#0c5460}
</style>
</head>

<body>

<div class="container">
<h1>Employee Management System (XML)</h1>

<div id="message" class="message"></div>

<div class="form-container">
<input type="hidden" id="editIndex">

<div>
<label>ID</label>
<input type="text" id="empId">
</div>

<div>
<label>Name</label>
<input type="text" id="empName">
</div>

<div>
<label>Department</label>
<input type="text" id="empDept">
</div>

<div>
<label>Salary</label>
<input type="number" id="empSalary">
</div>

<div class="buttons">
<button class="add-btn" id="addBtn" onclick="addEmployee()">Add Employee</button>
<button class="update-btn" id="updateBtn" onclick="updateEmployee()">Update Employee</button>
<button class="clear-btn" onclick="clearForm()">Clear</button>
</div>
</div>

<table>
<thead>
<tr>
<th>ID</th>
<th>Name</th>
<th>Department</th>
<th>Salary</th>
<th>Actions</th>
</tr>
</thead>
<tbody id="employeeBody"></tbody>
</table>
</div>

<script>
let xmlDoc=null

window.onload=loadEmployees

function loadEmployees(){
let xhr=new XMLHttpRequest()
xhr.open("GET","employees.xml",true)
xhr.onreadystatechange=function(){
if(xhr.readyState===4){
if(xhr.status===200){
xmlDoc=xhr.responseXML
if(!xmlDoc){showMsg("Malformed XML","error");return}
displayEmployees()
}else{
showMsg("Error loading XML","error")
}
}
}
xhr.send()
}

function displayEmployees(){
let body=document.getElementById("employeeBody")
body.innerHTML=""
let emps=xmlDoc.getElementsByTagName("employee")
if(emps.length===0){
body.innerHTML='<tr><td colspan="5" class="center">No employees found</td></tr>'
return
}
for(let i=0;i<emps.length;i++){
let e=emps[i]
let row=document.createElement("tr")
row.innerHTML=`
<td>${e.getElementsByTagName("id")[0].textContent}</td>
<td>${e.getElementsByTagName("name")[0].textContent}</td>
<td>${e.getElementsByTagName("department")[0].textContent}</td>
<td>${e.getElementsByTagName("salary")[0].textContent}</td>
<td>
<button onclick="editEmployee(${i})">Edit</button>
<button class="delete-btn" onclick="deleteEmployee(${i})">Delete</button>
</td>`
body.appendChild(row)
}
}

function addEmployee(){
let id=empId.value.trim()
let n=empName.value.trim()
let d=empDept.value.trim()
let s=empSalary.value.trim()
if(!id||!n||!d||!s){showMsg("All fields required","error");return}
let emp=xmlDoc.createElement("employee")
emp.appendChild(createNode("id",id))
emp.appendChild(createNode("name",n))
emp.appendChild(createNode("department",d))
emp.appendChild(createNode("salary",s))
xmlDoc.documentElement.appendChild(emp)
displayEmployees()
clearForm()
showMsg("Employee added","success")
}

function editEmployee(i){
let emp=xmlDoc.getElementsByTagName("employee")[i]
empId.value=emp.getElementsByTagName("id")[0].textContent
empName.value=emp.getElementsByTagName("name")[0].textContent
empDept.value=emp.getElementsByTagName("department")[0].textContent
empSalary.value=emp.getElementsByTagName("salary")[0].textContent
empId.disabled=true
editIndex.value=i
addBtn.style.display="none"
updateBtn.style.display="inline-block"
showMsg("Edit mode enabled","info")
}

function updateEmployee(){
let i=editIndex.value
let emp=xmlDoc.getElementsByTagName("employee")[i]
emp.getElementsByTagName("name")[0].textContent=empName.value
emp.getElementsByTagName("department")[0].textContent=empDept.value
emp.getElementsByTagName("salary")[0].textContent=empSalary.value
displayEmployees()
clearForm()
showMsg("Employee updated","success")
}

function deleteEmployee(i){
let emp=xmlDoc.getElementsByTagName("employee")[i]
emp.parentNode.removeChild(emp)
displayEmployees()
showMsg("Employee deleted","success")
}

function clearForm(){
empId.value=""
empName.value=""
empDept.value=""
empSalary.value=""
empId.disabled=false
editIndex.value=""
addBtn.style.display="inline-block"
updateBtn.style.display="none"
}

function createNode(t,v){
let n=xmlDoc.createElement(t)
n.textContent=v
return n
}

function showMsg(m,t){
let d=document.getElementById("message")
d.className="message "+t
d.innerHTML=m
setTimeout(()=>{d.innerHTML="";d.className="message"},4000)
}
</script>

</body>
</html>